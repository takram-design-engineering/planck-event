!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory(global.Planck=global.Planck||{})}(this,function(exports){"use strict";function Namespace(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,symbol=Symbol(name);return function namespace(object){var init=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(data){return data};return void 0===object[symbol]&&(object[symbol]=init({})),object[symbol]}}function AssertionError(message){this.message=message}function resolveRelativePath(parts){return parts.reduce(function(result,part){return 0===part.length||"."===part?result:".."===part?(result.pop(),result):[].concat(toConsumableArray(result),[part])},[])}function ImplementationError(message){this.message=message}function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}function modifyEvent(event){var scope=internal(event);return{set target(value){scope.target=value||null},set currentTarget(value){scope.currentTarget=value||null},set phase(value){scope.phase=value||null}}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},inherits=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)},objectWithoutProperties=function(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target},possibleConstructorReturn=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call},slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),toConsumableArray=function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)},internal$1=Namespace("AggregateFunction"),AggregateFunction=function(){function AggregateFunction(){var targets=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];classCallCheck(this,AggregateFunction),internal$1(this).targets=targets}return createClass(AggregateFunction,[{key:"apply",value:function apply(target,bound,args){return internal$1(this).targets.map(function(target){return Reflect.apply(target,bound,args)})}},{key:"getPrototypeOf",value:function getPrototypeOf(target){return this.constructor.prototype}}],[{key:"new",value:function _new(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var instance=new(Function.prototype.bind.apply(this,[null].concat(args)));return new Proxy(function(){},instance)}}]),AggregateFunction}(),internal$$1=Namespace("Aggregate"),Aggregate=function(){function Aggregate(){var targets=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];classCallCheck(this,Aggregate),internal$$1(this).targets=targets}return createClass(Aggregate,[{key:"set",value:function set$$1(target,property,value,receiver){return internal$$1(this).targets.forEach(function(target){Reflect.set(target,property,value)}),Reflect.set(target,property,value,receiver)}},{key:"get",value:function get$$1(target,property,receiver){var scope=internal$$1(this);return scope.targets.every(function(target){return"function"==typeof Reflect.get(target,property)})?AggregateFunction.new(scope.targets.map(function(target){return Reflect.get(target,property).bind(target)})):Reflect.get(scope.targets[0],property,receiver)}},{key:"getPrototypeOf",value:function getPrototypeOf(target){return this.constructor.prototype}}],[{key:"new",value:function _new(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];var instance=new(Function.prototype.bind.apply(this,[null].concat(args)));return new Proxy({},instance)}}]),Aggregate}();Object.setPrototypeOf(AssertionError,Error),AssertionError.prototype=Object.create(Error.prototype),AssertionError.prototype.name="AssertionError",AssertionError.prototype.message="",AssertionError.prototype.constructor=AssertionError;var Environment=function(){function Environment(){classCallCheck(this,Environment)}return createClass(Environment,null,[{key:"type",get:function get$$1(){try{if(new Function("return this === window")())return"browser"}catch(error){}try{if(new Function("return this === self")())return"worker"}catch(error){}try{if(new Function("return this === global")())return"node"}catch(error){}throw new Error}},{key:"global",get:function get$$1(){switch(this.type){case"browser":return window;case"worker":return self;case"node":return global}throw new Error}}]),Environment}(),path=void 0;"node"===Environment.type&&(path=require("path"));var FilePath=function(){function FilePath(){classCallCheck(this,FilePath)}return createClass(FilePath,null,[{key:"resolve",value:function resolve(arg){var separator=void 0,root=void 0;"node"!==Environment.type?(separator="/",root=this.self.split("/").slice(0,-2).join("/")+"/"):(separator=path.sep,root="");var first=arg;first.startsWith(root)&&(first=first.substr(root.length));for(var _len3=arguments.length,rest=Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)rest[_key3-1]=arguments[_key3];return root+[].concat(toConsumableArray(resolveRelativePath(first.split(separator))),toConsumableArray(resolveRelativePath(rest.reduce(function(parts,part){return[].concat(toConsumableArray(parts),toConsumableArray(part.split(separator)))},[])))).join(separator)}},{key:"self",get:function get$$1(){switch(Environment.type){case"browser":return document.currentScript.src;case"worker":return self.location.href;case"node":return __filename}throw new Error}}]),FilePath}();Object.setPrototypeOf(ImplementationError,Error),ImplementationError.prototype=Object.create(Error.prototype),ImplementationError.prototype.name="ImplementationError",ImplementationError.prototype.message="",ImplementationError.prototype.constructor=ImplementationError;var internal$4=Namespace("Multiton"),Multiton=function(){function Multiton(key){if(classCallCheck(this,Multiton),this.constructor.has(key))throw new Error('Attempt to create multiple instances for key "'+key+'"')}return createClass(Multiton,null,[{key:"has",value:function has(key){var scope=internal$4(this);if(void 0===scope.instances)return!1;var coercedKey=this.coerceMultitonKey(key);return void 0!==scope.instances[coercedKey]}},{key:"for",value:function _for(key){var scope=internal$4(this);scope.instances||(scope.instances=new Map);var coercedKey=this.coerceMultitonKey(key);if(scope.instances.has(coercedKey))return scope.instances.get(coercedKey);for(var _len4=arguments.length,args=Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)args[_key4-1]=arguments[_key4];var instance=this.new.apply(this,[coercedKey].concat(args));return scope.instances.set(coercedKey,instance),instance}},{key:"new",value:function _new(){for(var _len5=arguments.length,args=Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return new(Function.prototype.bind.apply(this,[null].concat(args)))}},{key:"coerceMultitonKey",value:function coerceMultitonKey(key){return key}}]),Multiton}(),internal$5=Namespace("Semaphore"),Task=function Task(semaphore,callback){var _this=this;classCallCheck(this,Task);var promises=[new Promise(function(resolve,reject){_this.resolve=resolve,_this.reject=reject}),new Promise(function(resolve){_this.let=resolve}).then(function(){callback(_this.resolve,_this.reject)})];this.promise=Promise.all(promises).then(function(values){return semaphore.signal(),values[0]},function(reason){return semaphore.signal(),Promise.reject(reason)})},Semaphore=function(){function Semaphore(capacity){classCallCheck(this,Semaphore);var scope=internal$5(this);scope.capacity=capacity,scope.available=capacity,scope.queue=[]}return createClass(Semaphore,[{key:"wait",value:function wait(callback){var scope=internal$5(this),task=new Task(this,callback);return 0===scope.available?scope.queue.push(task):(--scope.available,task.let()),task.promise}},{key:"signal",value:function signal(){var scope=internal$5(this);0===scope.queue.length?++scope.available:scope.queue.shift().let()}},{key:"capacity",get:function get$$1(){return internal$5(this).capacity}},{key:"available",get:function get$$1(){return internal$5(this).available}}]),Semaphore}(),internal$6=Namespace("Singleton"),Singleton=function(){function Singleton(){if(classCallCheck(this,Singleton),void 0!==internal$6(this.constructor).instance)throw new Error("Attempt to create multiple instances for singleton")}return createClass(Singleton,null,[{key:"get",value:function get$$1(){var scope=internal$6(this);return void 0===scope.instance&&(scope.instance=this.new.apply(this,arguments)),scope.instance}},{key:"new",value:function _new(){for(var _len6=arguments.length,args=Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];return new(Function.prototype.bind.apply(this,[null].concat(args)))}}]),Singleton}(),Stride=function(){function Stride(){classCallCheck(this,Stride)}return createClass(Stride,null,[{key:"transform",value:function transform(array,stride,callback){var values=[];return array.forEach(function(value,index){var modulo=index%stride;if(values[modulo]=value,modulo===stride-1)for(var transformed=callback.apply(void 0,values.concat([Math.floor(index/stride)])),offset=0;offset<stride;++offset)array[index-(stride-offset-1)]=transformed[offset]}),array}},{key:"forEach",value:function forEach(array,stride,callback){var values=[];array.forEach(function(value,index){var modulo=index%stride;values[modulo]=value,modulo===stride-1&&callback.apply(void 0,values.concat([Math.floor(index/stride)]))})}},{key:"some",value:function some(array,stride,callback){var values=[];return array.some(function(value,index){var modulo=index%stride;return values[modulo]=value,modulo===stride-1&&callback.apply(void 0,values.concat([Math.floor(index/stride)]))})}},{key:"every",value:function every(array,stride,callback){var values=[];return array.every(function(value,index){var modulo=index%stride;return values[modulo]=value,modulo!==stride-1||callback.apply(void 0,values.concat([Math.floor(index/stride)]))})}},{key:"reduce",value:function reduce(array,stride,callback,initial){var values=[];return array.reduce(function(result,value,index){var modulo=index%stride;return values[modulo]=value,modulo===stride-1?callback.apply(void 0,[result].concat(values,[Math.floor(index/stride)])):result},initial)}}]),Stride}(),base64Arraybuffer=createCommonjsModule(function(module,exports){!function(){for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;exports.encode=function(arraybuffer){var bytes=new Uint8Array(arraybuffer),i,len=bytes.length,base64="";for(i=0;i<len;i+=3)base64+=chars[bytes[i]>>2],base64+=chars[(3&bytes[i])<<4|bytes[i+1]>>4],base64+=chars[(15&bytes[i+1])<<2|bytes[i+2]>>6],base64+=chars[63&bytes[i+2]];return len%3==2?base64=base64.substring(0,base64.length-1)+"=":len%3==1&&(base64=base64.substring(0,base64.length-2)+"=="),base64},exports.decode=function(base64){var bufferLength=.75*base64.length,len=base64.length,i,p=0,encoded1,encoded2,encoded3,encoded4;"="===base64[base64.length-1]&&(bufferLength--,"="===base64[base64.length-2]&&bufferLength--);var arraybuffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(arraybuffer);for(i=0;i<len;i+=4)encoded1=lookup[base64.charCodeAt(i)],encoded2=lookup[base64.charCodeAt(i+1)],encoded3=lookup[base64.charCodeAt(i+2)],encoded4=lookup[base64.charCodeAt(i+3)],bytes[p++]=encoded1<<2|encoded2>>4,bytes[p++]=(15&encoded2)<<4|encoded3>>2,bytes[p++]=(3&encoded3)<<6|63&encoded4;return arraybuffer}}()});if("node"===Environment.type){var encoding=require("text-encoding");void 0===Environment.global.TextEncoder&&(Environment.global.TextEncoder=encoding.TextEncoder),void 0===Environment.global.TextDecoder&&(Environment.global.TextDecoder=encoding.TextDecoder)}var Transferral=function(){function Transferral(){classCallCheck(this,Transferral)}return createClass(Transferral,null,[{key:"encode",value:function encode(object){if("function"!=typeof TextEncoder)throw new Error("TextEncoder is missing");var encoder=new TextEncoder,text=JSON.stringify(object);return encoder.encode(text).buffer}},{key:"decode",value:function decode(buffer){if("function"!=typeof TextDecoder)throw new Error("TextDecoder is missing");var decoder=new TextDecoder,view=new DataView(buffer),text=decoder.decode(view);return JSON.parse(text)}},{key:"pack",value:function pack(buffer){return base64Arraybuffer.encode(buffer)}},{key:"unpack",value:function unpack(string){return base64Arraybuffer.decode(string)}},{key:"packBufferGeometry",value:function packBufferGeometry(geometry){var _this2=this;Object.values(geometry.data.attributes).forEach(function(attribute){var constructor=Environment.global[attribute.type],buffer=new constructor(attribute.array).buffer;attribute.array=_this2.pack(buffer)})}},{key:"unpackBufferGeometry",value:function unpackBufferGeometry(geometry){var _this3=this;Object.values(geometry.data.attributes).forEach(function(attribute){var constructor=Environment.global[attribute.type],buffer=_this3.unpack(attribute.array);attribute.array=Array.from(new constructor(buffer))})}}]),Transferral}(),internal=Namespace("Event"),Event=function(){function Event(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};classCallCheck(this,Event),this.init(options)}return createClass(Event,[{key:"init",value:function init(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},type=_ref.type,_ref$captures=_ref.captures,captures=void 0===_ref$captures||_ref$captures,_ref$bubbles=_ref.bubbles,bubbles=void 0!==_ref$bubbles&&_ref$bubbles,scope=internal(this);return scope.type=type||null,scope.captures=!!captures,scope.bubbles=!!bubbles,scope.timestamp=Date.now(),scope.propagationStopped=!1,scope.immediatePropagationStopped=!1,scope.target=null,scope.currentTarget=null,scope.phase=null,this}},{key:"stopPropagation",value:function stopPropagation(){internal(this).propagationStopped=!0}},{key:"stopImmediatePropagation",value:function stopImmediatePropagation(){var scope=internal(this);scope.propagationStopped=!0,scope.immediatePropagationStopped=!0}},{key:"type",get:function get$$1(){return internal(this).type}},{key:"target",get:function get$$1(){return internal(this).target}},{key:"currentTarget",get:function get$$1(){return internal(this).currentTarget}},{key:"phase",get:function get$$1(){return internal(this).phase}},{key:"captures",get:function get$$1(){return internal(this).captures}},{key:"bubbles",get:function get$$1(){return internal(this).bubbles}},{key:"timestamp",get:function get$$1(){return internal(this).timestamp}},{key:"propagationStopped",get:function get$$1(){return internal(this).propagationStopped}},{key:"immediatePropagationStopped",get:function get$$1(){return internal(this).immediatePropagationStopped}}]),Event}(),CustomEvent=function(_Event){function CustomEvent(){return classCallCheck(this,CustomEvent),possibleConstructorReturn(this,(CustomEvent.__proto__||Object.getPrototypeOf(CustomEvent)).apply(this,arguments))}return inherits(CustomEvent,_Event),createClass(CustomEvent,[{key:"init",value:function init(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},type=_ref.type,target=_ref.target,rest=objectWithoutProperties(_ref,["type","target"]);return get(CustomEvent.prototype.__proto__||Object.getPrototypeOf(CustomEvent.prototype),"init",this).call(this,_extends({},rest,{type:type})),modifyEvent(this).target=target,this}}]),CustomEvent}(Event),internal$1$1=Namespace("EventBundle"),EventBundle=function(_Event){function EventBundle(){return classCallCheck(this,EventBundle),possibleConstructorReturn(this,(EventBundle.__proto__||Object.getPrototypeOf(EventBundle)).apply(this,arguments))}return inherits(EventBundle,_Event),createClass(EventBundle,[{key:"init",value:function init(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},originalEvent=_ref.originalEvent,rest=objectWithoutProperties(_ref,["originalEvent"]);return get(EventBundle.prototype.__proto__||Object.getPrototypeOf(EventBundle.prototype),"init",this).call(this,_extends({},rest)),internal$1$1(this).originalEvent=originalEvent,this}},{key:"preventDefault",value:function preventDefault(){internal$1$1(this).originalEvent.preventDefault()}},{key:"defaultPrevented",get:function get$$1(){return internal$1$1(this).originalEvent.defaultPrevented}},{key:"originalEvent",get:function get$$1(){return internal$1$1(this).originalEvent}}]),EventBundle}(Event),GenericEvent=function(_CustomEvent){function GenericEvent(){return classCallCheck(this,GenericEvent),possibleConstructorReturn(this,(GenericEvent.__proto__||Object.getPrototypeOf(GenericEvent)).apply(this,arguments))}return inherits(GenericEvent,_CustomEvent),createClass(GenericEvent,[{key:"init",value:function init(){var _this2=this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},type=_ref.type,target=_ref.target,rest=objectWithoutProperties(_ref,["type","target"]);return get(GenericEvent.prototype.__proto__||Object.getPrototypeOf(GenericEvent.prototype),"init",this).call(this,{type:type,target:target,captures:!1,bubbles:!1}),Object.entries(rest).forEach(function(entry){var _entry=slicedToArray(entry,2),property=_entry[0],value=_entry[1];if({}.hasOwnProperty.call(_this2,property))throw new Error('Name "'+property+'" cannot be used for event property');_this2[property]=value}),this}}]),GenericEvent}(CustomEvent),internal$2=Namespace("EventDispatcher"),EventDispatcher=function(){function EventDispatcher(){classCallCheck(this,EventDispatcher),internal$2(this).listeners={}}return createClass(EventDispatcher,[{key:"addEventListener",value:function addEventListener(type,listener){var capture=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("function"!=typeof listener&&"object"!==(void 0===listener?"undefined":_typeof(listener)))throw new Error("Attempt to add non-function non-object listener");var scope=internal$2(this);void 0===scope.listeners[type]&&(scope.listeners[type]={bubble:[],capture:[]});var listeners=capture?scope.listeners[type].capture:scope.listeners[type].bubble;listeners.includes(listener)||listeners.push(listener)}},{key:"removeEventListener",value:function removeEventListener(type,listener){var capture=arguments.length>2&&void 0!==arguments[2]&&arguments[2],scope=internal$2(this);if(void 0!==scope.listeners[type]){var listeners=capture?scope.listeners[type].capture:scope.listeners[type].bubble,index=listeners.indexOf(listener);-1!==index&&listeners.splice(index,1)}}},{key:"dispatchEvent",value:function dispatchEvent(object){var _this=this,event=object;event instanceof Event||(event=new GenericEvent(object));var scope=internal$2(this),listeners=scope.listeners[event.type];if(void 0!==listeners){var phase=event.phase;phase&&"target"!==phase&&"capture"!==phase||[].concat(toConsumableArray(listeners.capture)).some(function(listener){if("function"==typeof listener)listener.call(_this,event);else{if("function"!=typeof listener.handleEvent)throw new Error("Listener is neither function nor event listener");listener.handleEvent(event)}return event.immediatePropagationStopped}),event.immediatePropagationStopped||phase&&"target"!==phase&&"bubble"!==phase||[].concat(toConsumableArray(listeners.bubble)).some(function(listener){return"function"==typeof listener?listener.call(_this,event):"function"==typeof listener.handleEvent&&listener.handleEvent(event),event.immediatePropagationStopped})}}}]),EventDispatcher}(),internal$3=Namespace("EventTarget"),EventTarget=function(_EventDispatcher){function EventTarget(){classCallCheck(this,EventTarget);var _this=possibleConstructorReturn(this,(EventTarget.__proto__||Object.getPrototypeOf(EventTarget)).call(this)),scope=internal$3(_this);return scope.ancestorEventTarget=null,scope.descendantEventTarget=null,_this}return inherits(EventTarget,_EventDispatcher),createClass(EventTarget,[{key:"determinePropagationPath",value:function determinePropagationPath(){var target=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,path=[];if(null!==target&&void 0!==target)for(var ancestor=target;null!==ancestor&&void 0!==ancestor;)path.unshift(ancestor),ancestor=ancestor.ancestorEventTarget;else for(var descendant=this;null!==descendant&&void 0!==descendant;)path.push(descendant),descendant=descendant.descendantEventTarget;return path}},{key:"dispatchImmediateEvent",value:function dispatchImmediateEvent(event){get(EventTarget.prototype.__proto__||Object.getPrototypeOf(EventTarget.prototype),"dispatchEvent",this).call(this,event)}},{key:"dispatchEvent",value:function dispatchEvent(object){var propagationPath=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,event=object;if(event instanceof Event||(event=new GenericEvent(object)),!event.captures&&!event.bubbles)return void this.dispatchImmediateEvent(event);var capturingPath=void 0;null!==propagationPath&&void 0!==propagationPath?capturingPath=[].concat(toConsumableArray(propagationPath)):event.target&&(capturingPath=this.determinePropagationPath(event.target));var modifier=modifyEvent(event);null===event.target?modifier.target=capturingPath.pop():capturingPath.pop();var bubblingPath=[].concat(toConsumableArray(capturingPath));bubblingPath.reverse(),event.captures&&(modifier.phase="capture",capturingPath.some(function(object){return modifier.currentTarget=object,event.currentTarget.dispatchImmediateEvent(event),event.propagationStopped})),event.propagationStopped||!Number.isInteger(event.target)&&(modifier.phase="target",modifier.currentTarget=event.target,event.currentTarget.dispatchImmediateEvent(event),event.propagationStopped)||event.bubbles&&(modifier.phase="bubble",bubblingPath.some(function(object){return modifier.currentTarget=object,event.currentTarget.dispatchImmediateEvent(event),event.propagationStopped}))}},{key:"ancestorEventTarget",get:function get$$1(){return internal$3(this).ancestorEventTarget},set:function set$$1(value){internal$3(this).ancestorEventTarget=value||null}},{key:"descendantEventTarget",get:function get$$1(){return internal$3(this).descendantEventTarget},set:function set$$1(value){internal$3(this).descendantEventTarget=value||null}}]),EventTarget}(EventDispatcher),KeyboardEvent=function(_EventBundle){function KeyboardEvent(){return classCallCheck(this,KeyboardEvent),possibleConstructorReturn(this,(KeyboardEvent.__proto__||Object.getPrototypeOf(KeyboardEvent)).apply(this,arguments))}return inherits(KeyboardEvent,_EventBundle),createClass(KeyboardEvent,[{key:"init",value:function init(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},rest=objectWithoutProperties(_ref,[]);return get(KeyboardEvent.prototype.__proto__||Object.getPrototypeOf(KeyboardEvent.prototype),"init",this).call(this,_extends({},rest)),this}},{key:"key",get:function get$$1(){return this.originalEvent.key}},{key:"code",get:function get$$1(){return this.originalEvent.code}},{key:"ctrlKey",get:function get$$1(){return this.originalEvent.ctrlKey}},{key:"shiftKey",get:function get$$1(){return this.originalEvent.shiftKey}},{key:"altKey",get:function get$$1(){return this.originalEvent.altKey}},{key:"metaKey",get:function get$$1(){return this.originalEvent.metaKey}},{key:"repeat",get:function get$$1(){return this.originalEvent.repeat}}]),KeyboardEvent}(EventBundle),internal$4$1=Namespace("MouseEvent"),MouseEvent=function(_EventBundle){function MouseEvent(){return classCallCheck(this,MouseEvent),possibleConstructorReturn(this,(MouseEvent.__proto__||Object.getPrototypeOf(MouseEvent)).apply(this,arguments))}return inherits(MouseEvent,_EventBundle),createClass(MouseEvent,[{key:"init",value:function init(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},x=_ref.x,y=_ref.y,movementX=_ref.movementX,movementY=_ref.movementY,rest=objectWithoutProperties(_ref,["x","y","movementX","movementY"]);get(MouseEvent.prototype.__proto__||Object.getPrototypeOf(MouseEvent.prototype),"init",this).call(this,_extends({},rest));var scope=internal$4$1(this);return scope.x=x,scope.y=y,scope.movementX=movementX,scope.movementY=movementY,this}},{key:"x",get:function get$$1(){return internal$4$1(this).x}},{key:"y",get:function get$$1(){return internal$4$1(this).y}},{key:"movementX",get:function get$$1(){return internal$4$1(this).movementX}},{key:"movementY",get:function get$$1(){return internal$4$1(this).movementY}},{key:"button",get:function get$$1(){return this.originalEvent.button}},{key:"ctrlKey",get:function get$$1(){return this.originalEvent.ctrlKey}},{key:"shiftKey",get:function get$$1(){return this.originalEvent.shiftKey}},{key:"altKey",get:function get$$1(){return this.originalEvent.altKey}},{key:"metaKey",get:function get$$1(){return this.originalEvent.metaKey}}]),MouseEvent}(EventBundle),internal$5$1=Namespace("Touch"),Touch=function(){function Touch(){classCallCheck(this,Touch),this.init.apply(this,arguments)}return createClass(Touch,[{key:"init",value:function init(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},x=_ref.x,y=_ref.y,target=_ref.target,originalTouch=_ref.originalTouch,scope=internal$5$1(this);return scope.x=x,scope.y=y,scope.target=target,scope.originalTouch=originalTouch,this}},{key:"identifier",get:function get$$1(){return this.originalTouch.identifier}},{key:"x",get:function get$$1(){return internal$5$1(this).x}},{key:"y",get:function get$$1(){return internal$5$1(this).y}},{key:"target",get:function get$$1(){return internal$5$1(this).target}},{key:"originalTouch",get:function get$$1(){return internal$5$1(this).originalTouch}}]),Touch}(),internal$6$1=Namespace("TouchEvent"),TouchEvent=function(_EventBundle){function TouchEvent(){return classCallCheck(this,TouchEvent),possibleConstructorReturn(this,(TouchEvent.__proto__||Object.getPrototypeOf(TouchEvent)).apply(this,arguments))}return inherits(TouchEvent,_EventBundle),createClass(TouchEvent,[{key:"init",value:function init(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},touches=_ref.touches,changedTouches=_ref.changedTouches,rest=objectWithoutProperties(_ref,["touches","changedTouches"]);get(TouchEvent.prototype.__proto__||Object.getPrototypeOf(TouchEvent.prototype),"init",this).call(this,_extends({},rest));var scope=internal$6$1(this);return scope.touches=touches,scope.changedTouches=changedTouches,this}},{key:"touches",get:function get$$1(){return internal$6$1(this).touches}},{key:"changedTouches",get:function get$$1(){return internal$6$1(this).changedTouches}},{key:"ctrlKey",get:function get$$1(){return this.originalEvent.ctrlKey}},{key:"shiftKey",get:function get$$1(){return this.originalEvent.shiftKey}},{key:"altKey",get:function get$$1(){return this.originalEvent.altKey}},{key:"metaKey",get:function get$$1(){return this.originalEvent.metaKey}}]),TouchEvent}(EventBundle),TouchList=function(_Array){function TouchList(){classCallCheck(this,TouchList);var _this=possibleConstructorReturn(this,(TouchList.__proto__||Object.getPrototypeOf(TouchList)).call(this));return _this.init.apply(_this,arguments),_this}return inherits(TouchList,_Array),createClass(TouchList,[{key:"init",value:function init(first){if(this.length=0,first instanceof TouchList)this.push.apply(this,toConsumableArray(first));else{for(var _len=arguments.length,rest=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)rest[_key-1]=arguments[_key];this.push.apply(this,[first].concat(rest))}}},{key:"item",value:function item(index){return this[index]}}]),TouchList}(Array),WheelEvent=function(_MouseEvent){function WheelEvent(){return classCallCheck(this,WheelEvent),possibleConstructorReturn(this,(WheelEvent.__proto__||Object.getPrototypeOf(WheelEvent)).apply(this,arguments))}return inherits(WheelEvent,_MouseEvent),createClass(WheelEvent,[{key:"init",value:function init(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},rest=objectWithoutProperties(_ref,[]);return get(WheelEvent.prototype.__proto__||Object.getPrototypeOf(WheelEvent.prototype),"init",this).call(this,_extends({},rest,{type:"wheel"})),this}},{key:"deltaX",get:function get$$1(){return this.originalEvent.deltaX}},{key:"deltaY",get:function get$$1(){return this.originalEvent.deltaY}},{key:"deltaZ",get:function get$$1(){return this.originalEvent.deltaZ}}]),WheelEvent}(MouseEvent);exports.CustomEvent=CustomEvent,exports.Event=Event,exports.EventBundle=EventBundle,exports.EventDispatcher=EventDispatcher,exports.EventTarget=EventTarget,exports.GenericEvent=GenericEvent,exports.KeyboardEvent=KeyboardEvent,exports.MouseEvent=MouseEvent,exports.Touch=Touch,exports.TouchEvent=TouchEvent,exports.TouchList=TouchList,exports.WheelEvent=WheelEvent,Object.defineProperty(exports,"__esModule",{value:!0})});